<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de compras</title>
    <link rel="stylesheet" href="assets/_css/index.css">
    <link rel="stylesheet" href="assets/_css/modal.css">
    <link rel="stylesheet" href="assets/_css/loading.css">
    <link rel="stylesheet" href="assets/_css/fixedInfo.css">
    <link rel="stylesheet" href="assets/_css/hideClass.css">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <meta name="description"
        content="Bem-vindo à Salva-Carteiras! Use nossa Calculadora de Compras para adicionar produtos, calcular valores e enviar sua lista via WhatsApp. Facilite suas compras com praticidade e economia!">
</head>

<body>
    <div class="div-flutuante">
        <button id="toggleBtn">+</button>

        <!-- Conteúdo oculto inicialmente -->
        <div id="conteudoFlutuante" style="display:none;">
            <div id="valorMaxContainer">
                <label for="valorMax">Valor máximo a gastar:</label>
                <input type="text" id="valorMax" placeholder="R$ 0,00" oninput="atualizarValorRestante()"
                    onkeydown="if(event.key === 'Enter'){confirmarValorMax();}">
            </div>

            <button id="editarValorBtn" style="display:none;" onclick="editarValorMax()">Editar valor máximo</button>

            <p>VALOR DA COMPRA</p>
            <span id="valorTotalFlutuante">R$ 0,00</span>
            <p>VALOR RESTANTE:</p>
            <span id="valorRestante">R$ 0,00</span>
        </div>
    </div>

    <div class="welcome">
        <div class="loading-screen">
            <h1>BEM VINDO À SALVA-CARTEIRAS</h1>
            <div class="progress-bar"></div>
        </div>
        <h1>CALCULADORA DE COMPRAS</h1>
        <div class="containerPrincipal">
            <h2>ADICIONAR PRODUTO</h2>
            <div class="etapas">
                <div class="step">
                    <label for="produto"> Produto:</label>
                    <input class="linhaInput" type="text" id="produto" onblur="validarProduto()">
                </div>
                <div class="step">
                    <label for="qtd">Qtd.:</label>
                    <div style="display: flex; align-items: center; gap: 5px;">
                        <input class="linhaInput" type="text" id="qtd" value="1" inputmode="numeric"
                            onblur="validarQuantidade()" oninput="permitirSomenteNumeros(this)">
                        <button type="button" class="qtd-btn red" onclick="alterarQuantidade(-1)">-</button>
                        <button type="button" class="qtd-btn green" onclick="alterarQuantidade(1)">+</button>
                    </div>
                </div>
                <div class="step">
                    <label for="valor">Valor: </label>
                    <div class="" style="display: flex; align-self: center; align-items: center; gap: 5px;">
                        <span>R$</span>
                        <input class="linhaInput" type="text" id="valor" inputmode="numeric"
                            onkeydown="permitirApenasNumeros(event)">
                    </div>

                </div>
            </div>
            <input class="botaoAdicionar" type="button" value="ADICIONAR" onclick="validarEAdicionarItem()">

        </div>

        <div class="containerSecundario" id="listaItens">
            <div class="labelsItensSubtitulo">
                <p>ID</p>
                <p>Produto:</p>
                <p>Qtd.:</p>
                <p>Valor Unitário:</p>
                <p>Valor Total:</p>
                <p></p>
            </div>
        </div>
        <div id="total">
            <p>TOTAL: R$ <span id="totalValor">0.00</span></p>
        </div>
        <button id="enviar-wpp" class="enviar-whatsapp" onclick="gerarPDF()">GERAR LISTA EM PDF</button>

        <!-- OCULTO POR ENQUANTO QUE NÃO FUNCIONAMENTO ATIVO -->
        <!-- <button id="importar-lista" onclick="abrirArquivo()"
            style="padding: 10px 20px; font-size: 16px; cursor: pointer; border: none; border-radius: 5px; color: white; background-color: #007bff;">
            IMPORTAR LISTA (somente JSON)
        </button> -->

        <input type="file" id="inputArquivo" style="display: none;" accept=".json">


        <!-- Modal -->
        <div id="modalExclusao" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <p>Tem certeza que deseja excluir este item?</p>
                <button id="confirmarExclusao">Confirmar</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>


    <script src="assets/_js/telaLoading.js"></script>
    <script src="assets/_js/validar.js"></script>
    <script src="assets/_js/addProduto.js"></script>
    <script src="assets/_js/toggleExpansivel.js"></script>


</body>

</html>